{"version":3,"file":"js/939.a6cc846e.js","mappings":"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","sources":["webpack://week6/./src/views/CartView.vue","webpack://week6/./src/views/CartView.vue?73a2"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row flex-column align-items-center\">\n      <div class=\"col-8\">\n        <h2 class=\"py-5 text-center fw-bold\">Cart</h2>\n        <table class=\"table\">\n          <thead>\n            <tr>\n              <td colspan=\"2\"></td>\n              <td colspan=\"4\" class=\"text-end\">\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-danger btn-sm\"\n                  @click=\"clearCarts\"\n                  :class=\"{ disabled: isLoading }\"\n                >\n                  清除購物車\n                </button>\n              </td>\n            </tr>\n            <tr>\n              <th scope=\"col\">刪除</th>\n              <th scope=\"col\">商品圖</th>\n              <th scope=\"col\">品名</th>\n              <th scope=\"col\">數量/單位</th>\n              <th scope=\"col\">單價</th>\n              <th scope=\"col\">小計</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in cartsList.carts\" :key=\"item\">\n              <th scope=\"row\">\n                <a href=\"#\" aria-label=\"delete\" class=\"btn btn-sm btn-outline-secondary\"\n                  @click.prevent=\"delCartItem(item.id)\"\n                  :class=\"{ disabled: isLoading }\">\n                  <i class=\"bi bi-x-lg\" style=\"line-height: 100%\"></i>\n                </a>\n              </th>\n              <td><img :src=\"item.product.imageUrl\" width=\"50\" alt=\"\" srcset=\"\" /></td>\n              <td>{{ item.product.title }}</td>\n              <td width=\"28%\">\n                <div class=\"d-flex align-items-center\">\n                  <div class=\"input-group input-group-sm\" style=\"width: auto; margin-right: 0.5rem\">\n                    <button\n                      class=\"btn btn-outline-secondary\"\n                      type=\"button\"\n                      @click=\"changeQty(item.id, item.product_id, item.qty - 1)\">\n                      <i class=\"bi bi-dash\"></i>\n                    </button>\n                    <input type=\"text\" class=\"form-control flex-grow-0 text-center\"\n                      placeholder=\"test\" :value=\"item.qty\" style=\"width: 40px\"\n                      aria-labelledby=\"bty\">\n                    <button class=\"btn btn-outline-secondary\" type=\"button\"\n                      @click=\"changeQty(item.id, item.product_id, item.qty + 1)\">\n                      <i class=\"bi bi-plus\"></i>\n                    </button>\n                  </div>\n                  {{ item.product.unit }}\n                </div>\n              </td>\n              <td>$ {{ item.product.price }}</td>\n              <td>$ {{ item.total }}</td>\n            </tr>\n            <tr>\n              <td colspan=\"6\" class=\"text-end\">總計 $ {{ cartsList.total }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n  <loading :active=\"isLoading\" :loader=\"'dots'\"></loading>\n  <product-modal ref=\"callModal\" :product-item=\"productItem\"></product-modal>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      // 購物車列表\n      cartsList: [],\n      // 表單資料\n      dataForm: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n    };\n  },\n  methods: {\n    // 更新購物車\n    getCarts() {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      this.$http.get(url).then((res) => {\n        this.cartsList = res.data.data;\n        this.isLoading = false;\n        console.log(this.cartsList);\n        // 購物車沒有產品時 或數量為 0 時disabled\n        // if (this.cartsList.carts.length <= 0 || this.cartsList.final_total === 0) {\n        //   this.$refs.submitBtn.disabled = true;\n        // } else {\n        //   this.$refs.submitBtn.disabled = false;\n        // }\n      }).catch((err) => {\n        this.isLoading = false;\n        alert(`updateCart ${url} ${err}`);\n      });\n    },\n    // 購物車-修改品項數量\n    changeQty(cartItemId, productId, qty) {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${cartItemId}`;\n      const data = { product_id: productId, qty };\n      this.isLoading = true;\n      console.log(cartItemId, data);\n      this.$http.put(url, { data }).then((res) => {\n        this.getCarts();\n        alert(res.data.message);\n      }).catch((err) => {\n        // alert(err.data);\n        console.log(err);\n        this.isLoading = false;\n      });\n    },\n    // 購物車-刪除單一品項\n    delCartItem(cartItemId) {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${cartItemId}`;\n      this.isLoading = true;\n      this.$http.delete(url).then((res) => {\n        this.getCarts();\n        alert(res.data.message);\n      }).catch((err) => {\n        alert(err.data.message);\n        this.isLoading = false;\n      });\n    },\n    // 清空購物車\n    clearCarts() {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`;\n      this.isLoading = true;\n      this.$http.delete(url).then((res) => {\n        this.getCarts();\n        alert(res.data.message);\n      }).catch((err) => {\n        alert(err.data.message);\n        this.isLoading = false;\n      });\n    },\n  },\n  mounted() {\n    this.getCarts();\n  },\n};\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=6a1533da\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/wendy/Documents/MySelf/六角 Vue直播班/Work/hexschoolLiveVue3/week6/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","colspan","scope","style","_hoisted_11","width","_hoisted_18","_hoisted_22","_hoisted_4","_hoisted_6","type","disabled","$data","onClick","$options","_hoisted_8","_createElementBlock","_Fragment","_renderList","carts","item","key","href","id","src","product","imageUrl","alt","srcset","_toDisplayString","title","product_id","qty","placeholder","value","unit","price","total","_createVNode","_component_loading","active","loader","_component_product_modal","ref","_ctx","data","isLoading","cartsList","dataForm","user","name","email","tel","address","message","methods","getCarts","url","this","$http","get","then","res","console","log","catch","err","alert","changeQty","cartItemId","productId","put","delCartItem","delete","clearCarts","mounted","__exports__","render"],"sourceRoot":""}