"use strict";(self["webpackChunkweek6"]=self["webpackChunkweek6"]||[]).push([[939],{939:function(t,e,s){s.r(e),s.d(e,{default:function(){return U}});var a=s(3396),l=s(7139),i=s(9242);const o={class:"container"},n={class:"row flex-column align-items-center"},c={class:"col-8"},r=(0,a._)("h2",{class:"py-5 text-center fw-bold"},"Cart",-1),d={class:"table"},u=(0,a._)("td",{colspan:"2"},null,-1),h={colspan:"4",class:"text-end"},p=(0,a._)("tr",null,[(0,a._)("th",{scope:"col"},"刪除"),(0,a._)("th",{scope:"col"},"商品圖"),(0,a._)("th",{scope:"col"},"品名"),(0,a._)("th",{scope:"col"},"數量/單位"),(0,a._)("th",{scope:"col"},"單價"),(0,a._)("th",{scope:"col"},"小計")],-1),g={scope:"row"},_=["onClick"],b=(0,a._)("i",{class:"bi bi-x-lg",style:{"line-height":"100%"}},null,-1),m=[b],C=["src"],y={width:"28%"},v={class:"d-flex align-items-center"},w={class:"input-group input-group-sm",style:{width:"auto","margin-right":"0.5rem"}},L=["onClick"],k=(0,a._)("i",{class:"bi bi-dash"},null,-1),x=[k],f=["value"],$=["onClick"],z=(0,a._)("i",{class:"bi bi-plus"},null,-1),q=[z],D={colspan:"6",class:"text-end"};function I(t,e,s,b,k,z){const I=(0,a.up)("loading"),Q=(0,a.up)("product-modal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",o,[(0,a._)("div",n,[(0,a._)("div",c,[r,(0,a._)("table",d,[(0,a._)("thead",null,[(0,a._)("tr",null,[u,(0,a._)("td",h,[(0,a._)("button",{type:"button",class:(0,l.C_)(["btn btn-outline-danger btn-sm",{disabled:k.isLoading}]),onClick:e[0]||(e[0]=(...t)=>z.clearCarts&&z.clearCarts(...t))}," 清除購物車 ",2)])]),p]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.cartsList.carts,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("th",g,[(0,a._)("a",{href:"#","aria-label":"delete",class:(0,l.C_)(["btn btn-sm btn-outline-secondary",{disabled:k.isLoading}]),onClick:(0,i.iM)((e=>z.delCartItem(t.id)),["prevent"])},m,10,_)]),(0,a._)("td",null,[(0,a._)("img",{src:t.product.imageUrl,width:"50",alt:"",srcset:""},null,8,C)]),(0,a._)("td",null,(0,l.zw)(t.product.title),1),(0,a._)("td",y,[(0,a._)("div",v,[(0,a._)("div",w,[(0,a._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:e=>z.changeQty(t.id,t.product_id,t.qty-1)},x,8,L),(0,a._)("input",{type:"text",class:"form-control flex-grow-0 text-center",placeholder:"test",value:t.qty,style:{width:"40px"},"aria-labelledby":"bty"},null,8,f),(0,a._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:e=>z.changeQty(t.id,t.product_id,t.qty+1)},q,8,$)]),(0,a.Uk)(" "+(0,l.zw)(t.product.unit),1)])]),(0,a._)("td",null,"$ "+(0,l.zw)(t.product.price),1),(0,a._)("td",null,"$ "+(0,l.zw)(t.total),1)])))),128)),(0,a._)("tr",null,[(0,a._)("td",D,"總計 $ "+(0,l.zw)(k.cartsList.total),1)])])])])])]),(0,a.Wm)(I,{active:k.isLoading,loader:"dots"},null,8,["active"]),(0,a.Wm)(Q,{ref:"callModal","product-item":t.productItem},null,8,["product-item"])],64)}var Q={data(){return{isLoading:!1,cartsList:[],dataForm:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCarts(){const t="https://vue3-course-api.hexschool.io/v2/api/groen/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cartsList=t.data.data,this.isLoading=!1,console.log(this.cartsList)})).catch((e=>{this.isLoading=!1,alert(`updateCart ${t} ${e}`)}))},changeQty(t,e,s){const a=`https://vue3-course-api.hexschool.io/v2/api/groen/cart/${t}`,l={product_id:e,qty:s};this.isLoading=!0,console.log(t,l),this.$http.put(a,{data:l}).then((t=>{this.getCarts(),alert(t.data.message)})).catch((t=>{console.log(t),this.isLoading=!1}))},delCartItem(t){const e=`https://vue3-course-api.hexschool.io/v2/api/groen/cart/${t}`;this.isLoading=!0,this.$http.delete(e).then((t=>{this.getCarts(),alert(t.data.message)})).catch((t=>{alert(t.data.message),this.isLoading=!1}))},clearCarts(){const t="https://vue3-course-api.hexschool.io/v2/api/groen/carts";this.isLoading=!0,this.$http.delete(t).then((t=>{this.getCarts(),alert(t.data.message)})).catch((t=>{alert(t.data.message),this.isLoading=!1}))}},mounted(){this.getCarts()}},H=s(89);const M=(0,H.Z)(Q,[["render",I]]);var U=M}}]);
//# sourceMappingURL=939.a6cc846e.js.map